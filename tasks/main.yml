---

- name: ensure piaware repository
  ansible.builtin.apt:
    deb: "{{ piaware_deb_url }}"
    update_cache: yes

- name: install piaware package
  ansible.builtin.package:
    name: piaware
    state: present

- name: configure piaware for auto updates
  ansible.builtin.shell: /usr/bin/piaware-config allow-auto-updates yes
  changed_when: false

- name: configure piaware for manual updates
  ansible.builtin.shell: /usr/bin/piaware-config allow-manual-updates yes
  changed_when: false

- name: install dump1090-fa package
  ansible.builtin.package:
    name: dump1090-fa
    state: present
